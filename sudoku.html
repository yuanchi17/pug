<!DOCTYPE html><html><head><title>數獨</title><link rel="icon" href="https://i.imgur.com/uvL7e25.png" type="image/x-icon"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover, user-scalable=no"><script>(function () {
  const host = location.host.split(':')[0]
  if (host === 'localhost') document.write(`<script src="http://${host}:35729/livereload.js?snipver=1"></` + 'script>')
})()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"></head><body><meta name="description" content="數獨"><meta property="og:description" content="數獨"><style>[v-cloak] {
  display: none;
}

body {
  margin-top: 55px;
}

#app .card {
  width: 450px;
}
#app input {
  width: 40px;
  height: 40px;
}
#app .prediction {
  height: 55px;
}</style><style>@charset "UTF-8";
body {
  font-family: "Source Sans Pro", Helvetica, Arial, "PingFang TC", "Microsoft JhengHei", "微軟正黑體", sans-serif;
  letter-spacing: 0.5px;
}</style><script async src="https://www.googletagmanager.com/gtag/js?id=UA-164526128-1"></script><script>function gtag () { window.dataLayer.push(arguments) }
const host = location.host.split(':')[0]
if (host !== 'localhost') {
  window.dataLayer = window.dataLayer || []
  window.GA_MEASUREMENT_ID = 'UA-164526128-1'
  gtag('js', new Date())

  gtag('config', 'UA-164526128-1')
}</script><div class="navbar navbar-expand-md navbar-light fixed-top"><a class="navbar-brand mx-auto" href="https://yuanchi17.github.io/index.html">YUAN</a></div><style>.navbar {
  border-bottom: solid 1px #e6e6e6;
  width: 100%;
  background-color: #ffffff;
}

a {
  color: #333333;
  font-weight: bold;
}</style><div class="content p-3 d-flex flex-column align-items-center" id="app"><div class="card bg-light mb-3"><h2 class="card-header text-center">數獨</h2><div class="card-body d-flex flex-column align-items-center"><div class="prediction mb-3"><p class="text-center m-0">{{checkAns}}</p><button class="btn btn-outline-success btn-sm mt-1 mr-1" v-for="(n, index) in refAns.ans" :key="index" @click="selectAns(index)">{{refAns.ans[index]}}</button></div><div class="paly"><div class="sudoku-x" v-for="(sudokuX, sudokuXId) in sudoku" :key="sudokuXId"><input class="sudoku-y text-center" type="text" v-model="sudoku[sudokuXId][sudokuYId]" v-for="(sudokuY, sudokuYId) in sudokuX" :key="sudokuYId" @input="referenceAns(sudokuXId, sudokuYId)"></div></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/axios@0.20.0/dist/axios.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lodash@4/lodash.min.js"></script><script src="https://cdn.jsdelivr.net/npm/papaparse@5/papaparse.min.js"></script><script src="https://cdn.jsdelivr.net/npm/popper.js@1/dist/umd/popper.min.js"></script><script src="https://cdn.jsdelivr.net/npm/qs@6/dist/qs.min.js"></script><script src="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.all.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js"></script><script>const vm = new Vue({ // eslint-disable-line no-unused-vars
  el: '#app',
  data: {
    sudoku: [
      ['8', '', '', '', '', '', '', '', ''],
      ['', '', '3', '6', '', '', '', '', ''],
      ['', '7', '', '', '9', '', '2', '', ''],
      ['', '5', '', '', '', '7', '', '', ''],
      ['', '', '', '', '4', '5', '7', '', ''],
      ['', '', '', '1', '', '', '', '3', ''],
      ['', '', '1', '', '', '', '', '6', '8'],
      ['', '', '8', '5', '', '', '', '1', ''],
      ['', '9', '', '', '', '', '4', '', ''],
    ],
    box: {},
    row: {},
    col: {},
    refAns: [],
    userAns: '',
    alert: '',
  },
  created () {
    // this.init()
  },
  computed: {
    checkAns () {
      this.box = {}
      for (let x = 0; x < 9; x++) {
        this.row = {}
        this.col = {}
        for (let y = 0; y < 9; y++) {
          const nx = this.sudoku[x][y]
          const ny = this.sudoku[y][x]
          const boxId = parseInt(y / 3) + 3 * parseInt(x / 3) // 屬於哪一個九宮格: 0 ~ 8

          if (this.row[nx]) {
            this.alert = 'x軸已重複'
            return
          }
          this.row[nx] = nx
          if (this.col[ny]) {
            this.alert = 'y軸已重複'
            return
          }
          this.col[ny] = ny
          if (this.box[boxId]) {
            if (this.box[boxId][nx]) {
              this.alert = '九宮格已重複'
              return
            }
            this.box[boxId][nx] = nx
            continue
          }
          this.box[boxId] = {}
          this.box[boxId][nx] = nx
        }
      }
      this.alert = '請答題'
    },
  },
  methods: {
    // init () {
    // },
    referenceAns (xId, yId) {
      this.refAns = { xId, yId, ans: [] }
      if (this.checkAns === '請答題') return

      const existX = this.sudoku[xId]
      const existY = []
      const existBox = []
      const boxId = parseInt(yId / 3) + 3 * parseInt(xId / 3) // 屬於哪一個九宮格: 0 ~ 8

      for (let x = 0; x < 9; x++) {
        for (let y = 0; y < 9; y++) {
          const number = this.sudoku[x][y]
          const box = parseInt(y / 3) + 3 * parseInt(x / 3)
          if (y === yId) existY.push(parseInt(number))
          if (box === boxId) existBox.push(parseInt(number))
        }
      }

      const existAll = _.uniq(_.concat(existY, existBox, existX))
      for (const i of _.range(1, 9)) {
        if (_.indexOf(existAll, i) === -1) this.refAns.ans.push(i)
      }
    },
    selectAns (index) {
      this.$set(this.sudoku[this.refAns.xId], this.refAns.yId, this.refAns.ans[index])
      this.refAns.ans = []
    },
  },
})</script></body></html>